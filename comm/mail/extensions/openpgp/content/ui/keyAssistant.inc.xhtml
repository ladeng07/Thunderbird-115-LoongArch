# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.

<html:dialog id="keyAssistant" xmlns="http://www.w3.org/1999/xhtml"
             class="modal-dialog">

  <h1 class="dialog-title" data-l10n-id="openpgp-key-assistant-title"></h1>

  <div id="discoverView" class="modal-dialog-body dialog-body-view">
    <div>
      <p data-l10n-id="openpgp-key-assistant-discover-title"></p>
      <div id="discoveryOutput"></div>
    </div>
    <menu class="dialog-menu-container menu-in-body">
      <button data-l10n-id="openpgp-key-assistant-cancel-button"
              onclick="gKeyAssistant.resetViews();"></button>
    </menu>
  </div><!-- #discoverView -->

  <div id="resolveView" class="modal-dialog-body dialog-body-view">
    <div>
      <p id="resolveViewTitle"></p>

      <!-- Usable section. -->
      <section id="resolveViewValid" hidden="hidden">
        <p id="resolveViewValidDescription" class="font-bold"
           data-l10n-id="openpgp-key-assistant-valid-description"></p>
        <ul id="resolveValidKeysList" class="reset-list radio-list"></ul>
        <p id="openpgp-key-assistant-help-accept"
           class="tip-caption margin-top-1em"
           data-l10n-id="openpgp-key-assistant-rogue-warning">
          <a onclick="openContentTab(this.href);"
             href="https://support.mozilla.org/kb/thunderbird-help-openpgp-counterfeit-key"
             data-l10n-name="openpgp-link"></a>
        </p>
      </section>

      <!-- Unusable section. -->
      <section id="resolveViewInvalid" hidden="hidden">
        <p id="resolveViewExpiredDescription" class="font-bold margin-top-1em"></p>
        <ul id="resolveInvalidKeysList" class="reset-list radio-list"></ul>
      </section>

      <button data-l10n-id="openpgp-key-assistant-discover-online-button"
              onclick="gKeyAssistant.changeView('discover', 'resolving');"></button>
      <button data-l10n-id="openpgp-key-assistant-import-keys-button"
              onclick="gKeyAssistant.importFromFile('resolving');"></button>
    </div>

    <menu class="dialog-menu-container two-columns menu-in-body">
      <button data-l10n-id="openpgp-key-assistant-back-button"
              onclick="gKeyAssistant.resetViews();"></button>
      <button id="resolveViewAcceptKey"
              data-l10n-id="openpgp-key-assistant-accept-button"
              class="primary"
              disabled="disabled"></button>
    </menu>
  </div><!-- #resolveView -->

  <div id="mainView" class="modal-dialog-body dialog-body-view">
    <div id="modalDialogNotification" class="modal-dialog-notifications">
      <!-- Notifications will be lazily loaded here. -->
    </div>

    <!-- Issues section. -->
    <section id="keyAssistantIssues" hidden="hidden">
      <p id="keyAssistantIssuesHeader" class="font-bold"
         data-l10n-id="openpgp-key-assistant-recipients-issue-header"/>
      <p id="keyAssistantIssuesDescription">
        <a onclick="openContentTab(this.href);"
           href="https://support.mozilla.org/kb/thunderbird-help-cannot-encrypt"
           data-l10n-name="openpgp-link"></a>
      </p>

      <ul id="keysListIssues" class="reset-list key-list"></ul>

      <button data-l10n-id="openpgp-key-assistant-discover-online-button"
              onclick="gKeyAssistant.changeView('discover', 'overview');"></button>
      <button data-l10n-id="openpgp-key-assistant-import-keys-button"
              onclick="gKeyAssistant.importFromFile('overview');"></button>

      <p id="openpgp-key-assistant-help-alias"
         class="tip-caption margin-top-1em"
         data-l10n-id="openpgp-key-assistant-info-alias">
        <a onclick="openContentTab(this.href);"
           href="https://support.mozilla.org/kb/thunderbird-help-openpgp-alias"
           data-l10n-name="openpgp-link"></a>
      </p>
    </section>

    <!-- No issues section. -->
    <section id="keyAssistantValid" class="margin-top-1em" hidden="hidden">
      <div class="container-with-link">
        <p id="keyAssistantValidDescription"></p>
        <button id="toggleRecipientsButton"
                class="button-link"
                data-l10n-id="openpgp-key-assistant-recipients-show-button"></button>
      </div>

      <ul id="keysListValid" class="reset-list key-list" hidden="hidden"></ul>
    </section>
  </div><!-- #mainView -->

  <menu id="mainButtons" class="dialog-menu-container two-columns">
    <div>
      <button data-l10n-id="openpgp-key-assistant-close-button"
              onclick="gKeyAssistant.close();"></button>
    </div>
    <div>
      <button id="disableEncryptionButton"
              data-l10n-id="openpgp-key-assistant-disable-button"></button>
      <button id="sendEncryptedButton"
              data-l10n-id="openpgp-key-assistant-confirm-button"
              class="primary"
              disabled="disabled"></button>
    </div>
  </menu>
</html:dialog>
